<ul class="current">
    {% for nav_item in nav recursive %}
        {% if nav_item.header %}
            <span>{{ nav_item.title }}</span>
            {{ loop(nav_item.children) }}
        {% else %}
            <li class="toctree-l{{ nav_item.depth }} {% if nav_item.active%}current{%endif%}">
            <a class="{% if nav_item.active%}current{%endif%}" href="{{ nav_item.url }}">{{ nav_item.title }}</a>
            {% if nav_item.active %}
                <ul>
                    {% if nav_item.children %}
                        {{ loop(nav_item.children) }}
                    {% else %}
                        {% for toc_item in toc %}
                            <li class="toctree-l{{ nav_item.depth + 1 }}"><a href="{{ toc_item.url }}">{{ toc_item.title }}</a></li>
                        {% endfor %}
                    {% endif %}
                </ul>
            {% endif %}
            </li>
        {% endif %}
    {% endfor %}
</ul>
